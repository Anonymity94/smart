import{p as f,M as y,d as O,J as g,h as P,R as c}from"./entry.82983d8d.js";import"./index.de3c7159.js";import{c as k,B as R}from"./button.7c3ba272.js";var $=function(){var e=f(!1);return y(function(){e.value=!0}),e};const x=$;var D={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:Object,emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function p(r){return!!(r&&r.then)}const M=O({compatConfig:{MODE:3},name:"ActionButton",props:D,setup:function(e,B){var C=B.slots,u=f(!1),v=f(),i=f(!1),d,m=x();g(function(){e.autofocus&&(d=setTimeout(function(){var n;return(n=v.value.$el)===null||n===void 0?void 0:n.focus()}))}),y(function(){clearTimeout(d)});var b=function(o){var t=e.close;p(o)&&(i.value=!0,o.then(function(){m.value||(i.value=!1),t.apply(void 0,arguments),u.value=!1},function(l){console.error(l),m.value||(i.value=!1),u.value=!1}))},h=function(o){var t=e.actionFn,l=e.close,s=l===void 0?function(){}:l;if(!u.value){if(u.value=!0,!t){s();return}var a;if(e.emitEvent){if(a=t(o),e.quitOnNullishReturnValue&&!p(a)){u.value=!1,s(o);return}}else if(t.length)a=t(s),u.value=!1;else if(a=t(),!a){s();return}b(a)}};return function(){var n=e.type,o=e.prefixCls,t=e.buttonProps;return P(R,c(c(c({},k(n)),{},{onClick:h,loading:i.value,prefixCls:o},t),{},{ref:v}),C)}}});export{M as A};
